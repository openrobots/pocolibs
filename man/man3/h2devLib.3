.\" Copyright (c) 1999-2005 CNRS/LAAS
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd January 21, 2005
.Dt errorLib 3
.Os pocoLibs
.Sh NAME 
.Nm errorLib
.Nd error code manipulation for pocoLibs
.Sh SYNOPSIS
.Fd "#include <portLib.h>"
.Fd "#include <h2devLib.h>"
.Ft STATUS
.Fn h2devInit void
.Ft int 
.Fn h2devAlloc "char *name" "H2_DEV_TYPE type"
.Ft int 
.Fn h2devFind "char *name" "H2_DEV_TYPE type"
.Ft void 
.Fn h2devShow void
.Ft void 
.Fn h2devFree "int dev"
.Ft STATUS 
.Fn h2devEnd void
.Ft STATUS 
.Fn h2devClean "char *pattern"
.Sh DESCRIPTION
.Fn h2devInit
initializes a 
.SM pocolibs
session.
It creates the IPC structures used by the library and initializes them 
to a know state.
.Pp
.Fn h2devInit 
should be called once, by any process, before using any other
.SM pocoLibs
function. This is generally handled by the 
.Xr h2 1
application.
.Fn h2devAlloc
allocates a
.Nm pocoLib
device.
The 
.Fa name
parameter specifies a name for the device to be allocated, and the 
.Fa type
parameter specifies the type of the device. It can be
.Dv H2_DEV_TYPE_SEM 
to create a semaphore device,
.Dv H2_DEV_TYPE_TASK
to create a task device,
.Dv H2_DEV_TYPE_MBOX
to create a mailbox device or
.Dv H2_DEV_TYPE_POSTER
to create a poster device.
.Pp
.Fn h2devFind
searches for a 
.Nm pocoLib
device with name 
.Fa name  
and type
.Fa type ,
allocated by another process, in order to access it.
.Pp
.Fn h2devShow
outputs to stdout a list of currently allocated 
.SM pocoLibs
devices.
.Pp
.Fn h2devFree
frees a 
.Nm pocoLib
device.
The corresponding device is returned to the system.
.Pp
.Fn h2devEnd
terminates a 
.Nm pocoLibs 
session.
It destroys any existing 
.Nm pocoLib
device and frees all used IPC structures (semaphores, mailboxes or shared 
memory) 
.Pp
All processes using 
.SM pocoLibs
should be terminated before calling
.Fn h2devEnd .
This is generally handled by the 
.Xr h2 1
application.
.Pp
.Fn h2devClean
searches for 
.Nm pocoLib
devices matching
.Fa pattern
(in the sense of shell file globing) and delete them.
.Sh RETURN VALUES
.Fn h2devAlloc
returns the index of the newly allocated device upon success, or
.Dv ERROR
in case of an error. In this case it calls
.Xr errnoSet 3
with the corresponding Unix or pocoLib error code.
.Pp
.Fn h2devFind
returns the index of the found device upon success, or
.Dv ERROR
in case of an error. In this case it calls
.Xr errnoSet 3
with the corresponding Unix or pocoLib error code.
.Sh SEE ALSO
.Xr h2 1 ,
.Xr h2semLib 3 ,
.Xr mboxLib 3 ,
.Xr posterLib 3 .
